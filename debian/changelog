x2goserver (4.0.1.19-0x2go1) UNRELEASED; urgency=medium

  [ Mike Gabriel ]
  * New upstream version (4.0.1.19):
    - Use File::Which to detect if sshfs command is available
      before trying to mount a client-side folder.
    - Be a bit more tolerant when trying to detect if a
      desktop icon is to be removed (using regexp, not
      eq).
    - Xsession script: Prevent bash failures when sourcing external bash
      scripts beyond our scope. (Fixes: #632, #675).
    - x2gogetapps: Support scanning of sub-directories when searching for
      .desktop files. We allow to dive down one level into subdirs, we on
      purpose do not recursively dive into the complete subtree. (Fixes: #633).
    - Make man2html an optional tool. Don't fail if it is missing on the
      build system (required for openSUSE/SLES builds).
    - Fix x2goserver-xsession/Makefile on SUSE. Detect SUSE distro and create
      Xsession related directory symlinks (xinitrc.d and Xclients.d).
    - Hack for x2goserver-xsession/Makefile during SUSE builds. If
      directoy /usr/share/doc/packages/brp-check-suse is present, the build env
      is also considered to be a SUSE system.
    - Trigger Xsession code for SUSE systems (look for /etc/SUSE-brand or
      /etc/SuSE-release for SUSE system recognition). (Fixes: #671).
    - x2gosqlitewrapper.c: Fix rpmlint error: no-return-in-nonvoid-function.
      Return the exitcode of execve().
    - Fix gramma in error message (in x2goresume-session).
    - x2gocleansessions: Call x2gormforward also on terminated sessions. This
      will make sure that re-assigned ports are really available on new session
      startup.
    - x2golistsessions(_root): Only update session state in session DB if
      x2goagent's state file really exists. This addresses a problem that occurs
      when x2golistsessions gets called via an x2gobroker-agent. The
      x2golistsessions script may show session states (--all-servers) of
      sessions on other servers that have session states files on their remote
      /tmp dirs. These files are not accessible for that x2golistsessions script
      and should simply be ignored. (Fixes: #638).
    - Provide pam_namespace support for has_agent_state_file() function.
    - Fix missing session list output if state file does not exist on the
      machine that runs x2golistsessions(_root).
    - Accept more verbose "DENY" output from x2godesktopsharing.
    - Make sure that all "su"-to-user-contexts use /bin/sh for wrapping around
      the executed command (in x2gocleansessions and x2golistsessions_root).
    - Also enforce /bin/sh as shell in su command in x2goprint.
    - README.i18n: Add file that explains the translation workflow for
      this package. Thanks to Mark Pedersen-Cook for drafting this file.
    - Make SSH agent forwarding work after having reconnected via SSH and
      having resumed a session. (Fixes: #672). Thanks to Robert Siemer for
      coming up with that idea.
    - Fix cross-user X2Go Desktop Sharing after being broken by implementing
      clipboard mode feature (and probably other code changes).
    - Document session startup / resumption failures (and their reasons) in
      server-side log output.
    - Handle AD domain users gracefully when X2Go is used with SQLite DB
      backend. (Fixes: #664).
    - Improve sanitizer, use 'x2gosid' sanitizer for session IDs everywhere.
      Drop unused 'pnixusername' sanitizer in 4.0.1.x release of X2Go Server.
    - Allow usernames in session IDs of length 48 chars.
    - Start sshfs with a timeout of 30 seconds (because it never finishes if
      something is wrong with the client-side TCP socket). Also remove/unmount
      mountpoints erroneously registered sshfs mountpoints if sshfs command
      times out. Furthermore, print errors to STDERR (not STDOUT). (Fixes:
      #405).
    - Handle execution of ss command from Perl script x2golistdesktops in a way
      that not only works on Debian, but also on Fedora et al. (Fixes: #727).
  * debian/control:
    + Add D (x2goserver): libfile-which-perl.
    + Add C (x2goserver: x2godesktopsharing (<< 3.1.1.2-0~). (Fixes: #700).
    + Bump Standards: to 3.9.6. No changes needed.
    - Don't depend on libdb-pg-perl for armhf builds. (Fixes: #712). Thanks to
      Heinrich Schuchardt for providing information on this.
    - Upgrade to D again (bin:package x2goserver): xfonts-base (Fixes: #770).
  * debian/x2goserver.docs:
    + Install README.i18n file into bin:package x2goserver.
  * x2goserver.spec:
    + Add to R: perl(File::Which).
    + Additionally adapt to building on openSUSE/SLES.
    + No shell expansion possible in obs-build, detect perl version only for
      non-SUSE builds.
    + Add to R: x2goserver-xsession.
    + Don't mention /etc/x2go/x2gosql/sql twice (directly and with wildcard).
    + No %{_sysconfdir}/x2go/Xclients.d on SUSE systems.
    + Use %{_localstatedir} instead of %{_sharedstatedir}.
    + Use proper if... then... clauses.
    + For SUSE builds: Add to R: shadow (useradd, groupadd).
    + Replace historical "egrep" with "grep -E".
    + Systemd support for SUSE >= 12.10.
    + Set %defattr macro for every bin:package.
    + SUSE and Fedora/RHEL have different package group names.
    + Add x2goserver-rpmlintrc file to handle some rpmlint errors and warnings.
    + SUSE has openssh, but no openssh-server.
    + Add to R (x2goserver): perl-X2Go-Server.
    + Add to R (diverse): perl(Config::Simple), perl(Switch) and
      perl(Capture::Tiny).
    + Add to R (x2goserver): perl(File::BaseDir).
    + Don't hard-code /var/lib/ in $HOME path of to-be-created user
      "x2gouser".
    + Add to BR: findutils.
    + For Fedora-like systems, don't make x2goserver bin:package authoritative
      for non-X2Go directories. (Fixes: #676).
    + Remove macro call %systemd_pre for Fedora/EPEL-7 builds. No such macro in
      Fedora/RHEL7. (Fixes: 698).
    + Create system user x2gouser with $HOME in /var/lib/x2go. (Fixes: #697).

  [ Matthew L. Dailey ]
  * New upstream version (4.0.1.19):
    - x2gocleansessions: Redirect stdin, stdout and stderr to /dev/null, test
      for the existence of the file descriptor before issuing the close,
      only capture the file descriptor backreference in the regex and
      send any close failures to syslog. (Fixes: #678).

  [ Lars Wendler ]
  * New upstream version (4.0.1.19):
    - Use "printf" instead of "echo -n". (Fixes: #668).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 07 Oct 2014 15:35:38 +0200

x2goserver (4.0.1.18-0x2go1) unstable; urgency=medium

  [ Horst Schirmeier ]
  * New upstream release (4.0.1.18):
    - Remove stale X11 lock files in cases where x2goagent mysteriously
      disappeared (e.g., due to kill -9 or a crash). (Fixes: #630).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Mon, 06 Oct 2014 22:27:42 +0200

x2goserver (4.0.1.17-0x2go1) unstable; urgency=medium

  * New upstream release (4.0.1.17):
    - Fix breakage of X2Go Server when upgrading from 4.0.1.15 while
      sessions are still in running / suspended state. (Fixes: #623).
    - Handle stale X11 socket files in cases where x2goagent has
      mysteriously disappeared (e.g. kill -9). (Fixes: #626).
    - Make sure that incompletely started up sessions get wiped from the
      session DB after 10 seconds.
    - Fix unreliable removal of client-side folder sharing desktop
      icons.
    - Update date in several man pages.
  * debian/control:
    + Upgrade x2goserver-xsession from Suggests: to Recommends:.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 03 Oct 2014 17:09:23 +0200

x2goserver (4.0.1.16-0x2go1) unstable; urgency=low

  [ Mike DePaulo ]
  * New upstream release (4.0.1.16):
    - Make X2Go Server aware of the Openbox desktop environment
      (Command: OPENBOX) (Fixes: #605)
    - Make X2Go Server aware of the IceWM desktop environment
      (Command: ICEWM) (Fixes: #606)
    - Support GNOME Flashback session (GNOME 3.8+) on distro releases such as
      Ubuntu 13.10+ and debian Jessie
      (NOTE: For most users, GNOME Flashback currently will not work.
       This requires that gnome-flashback.session actually be installed. Not
       every Linux distro has it available.
       It also requires that the gnome-session binary not require
       hardware 3D acceleration for said session. Currently, upstream GNOME
       and GNOME 3.8+ in all Linux distros do require this, only 3rd party
       builds do not. See X2Go bug #599 for example.)
      (Thanks Eugene San (eugenesan@gmail.com))
    - Fix launching GNOME 3 Fallback session (GNOME 3.4 & 3.6) on distros other
      than Ubuntu and Debian (Fixes: #599)
    - Fix support for Cinnamon 1.4 (Linux Mint 13) (Fixes: #569)
    - Fix the logic for launching Cinnamon 2.0 and 2.2 (Linux Mint 17).
      (Fixes: #572)
      NOTE: Fixing this bug in x2goserver is not sufficient to make Cinnamon 2.0
      & 2.2 to work properly with X2Go. Bug #150 in nx-libs is still a problem.
      Fixing this bug enables Cinnamon 2.0 and 2.2 to launch to their
      "fallback mode", which has many bugs and missing features when compared to
      "software rendering" mode (cinnamon2d), but is still better than nothing.
  * debian/rules:
    + Improve dh_auto_clean override.

  [ Mike Gabriel ]
  * New upstream version (4.0.1.16):
    - Let x2goversion exit with an error if the X2Go component cannot be
      found.
    - Detect terminated sessions from NX log file. Also interpret a session as
      terminated if terminating just has started.
    - Detect started/starting/resumed/resuming sessions by explicitly scanning
      the NX session log file for those keywords.
    - Interpret NX sessions marked as "aborting session" as (not yet) terminated
      sessions.
    - Provide config option for server-side/global clipboard behaviour in
      x2goagent.options. (Fixes: #506).
    - Be aware of poly-instantiated /tmp directories bind-mounted under
      /tmp-inst. (Fixes: #406).
    - On suspend: Call x2goumount-session before sending SIGHUP to x2goagent.
    - Refuse client communcation if server-side hostname is not set up
      correctly (Fixes: #468).
    - Fix string comparison in x2goumount-session.
    - Fix problems with unmounting shared folders on session suspension/
      termination. Remove extra parentheses from the fusermount execution
      call. (Fixes: #407).
    - Use type -p instead of which in x2goumount-session. Suppress output
      to stdout properly.
    - Use if--then--else--fi during x2goagent resuming in x2goresume-session
      script.
    - More reliably sync the NX session state with the status information in
      the X2Go session DB.
    - x2golistdesktops: Also detect sharable desktop sessions behind abstract
      kernel namespace sockets.
    - Add logcheck rules for X2Go Server. Thanks to Frank Werner for sending
      them in.
    - Correctly use diversions from stderr to stdout in shell commands.
      (Fixes: #520).
    - Don't die if no session state file is found, as it will break X2Go
      completely after upgrading from versions << 4.0.1.16 if sessions
      are still running/suspended during package upgrade.
    - Provide support for client-side choice of clipboard security. (Fixes:
      #524).
    - Use more quotes in x2goruncommand.
    - Detect the exit of rootless applications that forked to background on
      application execution. (Fixes: #122).
    - Make x2goruncommand more robust.
    - Don't fail Xsession startup if any of the profile scripts returns
      with an error.
    - Silently timeout in x2golistdesktops if calls to x2golistsessions and/or
      xwininfo don't produce output within one second. (Fixes: #543).
    - Allow email addresses as login usernames. (Fixes: #573).
    - Abort session startup if env var $USER or $SSH_CLIENT are not set.
      (Fixes: #558).
    - Allow length of username up to 48 characters (was: 32 characters). (Fixes:
      #574).
    - Abort session if env var $HOME is not set or if $HOME contains non-ASCII
      characters. (Fixes: #397).
    - Export XAUTHORITY env var in x2goruncommand to enable privilege upgrade
      for applications started via pkexec. (Fixes: #458).
    - x2gocleansessions: Don't print to stderr if the session state file cannot
      be found. This can happen during session startups. Report to system log
      instead.
    - Don't use Perl package File::ReadBackwards anymore.
    - Fix x2gormforward for 4.0.1.x release series (the X2Go::Log Perl module
      only exists in X2Go Server >= 4.1.0.0, the 4.0.1.x release series has to
      use x2gologlevel.pm in `x2gopath lib`. (Fixes: #617).
    - Pick x2gogetagentstate from 4.1.0.0 release series and adapt to usage
      with X2Go Server 4.0.1.x. (Fixes: #619).
  * debian/control, x2goserver.spec:
    + Update versioned D: x2goagent (>= 3.5.0.25). This assures that X2Go
      works with poly-instantiated /tmp directories.
    + Make sure x2gogetagentstate gets packaged in bin:package x2goserver.
    + Bump Standards: to 3.9.5. No changes needed.
    + Mark x2goserver-pyhoca bin:package as deprecated.
    + Drop D (x2goserver): libfile-readbackwards-perl.
  * x2goserver.spec:
    + Install {libdir}/x2go/x2gormforward into bin:package x2goserver.
    + Drop R (x2goserver): perl(File::ReadBackwards).

  [ Oleksandr Shneyder ]
  * New upstream version (4.0.1.16):
    - x2gostartagent, x2golistsession, x2gosuspend-session and
      x2goresume-session getting agent state from ~/.x2go/C-$SID/state. This
      should help to avoid session damage. Remove nxcleanup. (Fixes: #302,
      #511).
    - Move session file to /tmp/.x2go-$USER. (Fixes: #523).
    - Fix x2gostartagent failures if kbd is not "auto". Remove comma at end of
      options file.
    - Set default value for clipboard to "both" in x2gostartagent and
      x2goresume-session.
    - Clean user SSHD process if connection between server and client lost.
      This should fix error "Global request tcpip-forward failed". (Fixes:
      #495, #547).

  [ Orion Paplowski ]
  * x2goserver.spec:
    + Sync Fedora .spec file with our upstream-provided x2goserver.spec.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 26 Sep 2014 00:36:32 +0200

x2goserver (4.0.1.15-0x2go1) unstable; urgency=low

  * New upstream release (4.0.1.15):
    + Fix hanging of x2goserver init script. Cherry-pick a322d8c from master
      branch. (Fixes: #471).
    + Add COPYING (GPL-2) file to base project folder.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Thu, 03 Apr 2014 11:35:50 +0200

x2goserver (4.0.1.14-0x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream release (4.0.1.14):
    - Log SSHFS output and errors to ~/.x2go/C-<session>/sshfs-mounts.log.
      (Fixes: #415).
    - If x2golistmounts is used without cmd option <session_id>, then
      the env var $X2GO_SESSION (current session) will be attempted to use.
    - If x2goumount-session is used without cmd option <session_id>, then
      the env var $X2GO_SESSION (current session) will be attempted to use.
    - Fix x2gostartagent. Make sure the -nolisten tcp option is configurable
      via x2goagent.options. (Fixes: #424).
    - Safely remove desktop files for client-side shared folders. Remove
      the correct desktop file, even if the shared folder has already
      been (forcefully) umounted. Such situations occur in cases where
      the connection gets interrupted. SSHFS will then get removed by the
      Linux kernel and we have to "guess" what desktop icons is actually
      to be removed.
    - Fix broken file descriptor closures in x2gocleansessions. (Fixes:
      #441).
    - Provide proper Gentoo support in x2goserver-xsession portion of
      X2Go Server. (Fixes: #445).
    - x2gofm.desktop: Drop obsolete Encoding key from .desktop file.
    - Fix typos / hyphen-as-minus signs issues in x2goversion.8 and
      x2gomountdirs.8.
  * x2goserver.spec:
    - Let builds for EPEL-7 behave like recent Fedora builds.
    - Spcial handling of x2gofm.desktop. In EPEL-5 the Encoding key
      is still required for .desktop files.
  * debian/*.doc-base:
    + Provide *.doc-base files for bin:packages containing HTML man pages
      or other documentation.
  * debian/x2goserver.init:
    + Add status option for init script (test if x2gocleansessions is
      running or not).
    + Add Description key to LSB header.
  * debian/config:
    + Explicitly call set -e. Makes lintian happier.
  * debian/rules:
    + Detect Git-created ChangeLog file if present (created by X2Go
      upstream's build scripts during package build).

  [ Harald Nordgard-Hansen ]
  * New upstream release (4.0.1.14):
    - Correctly quote the tests against $DISTRIB_RELEASE in x2goruncommand that
      were badly quoted (which caused them to report the wrong result and to
      create a file called "=" in the user home directory). Aligning all tests
      to use the same style of quoting fixes this. (Fixes: #409).

  [ Orion Poplawski ]
  * New upstream release (4.0.1.14):
    - Fix wrong path to xinitrd.d in Xsession (section for RPM based distros).
      Also, add some existence/readability checking. (Fixes: #414).
    - Fix the x2goserver.service unit file. Allow systemd to track the service
      after startup. (Fixes: #428).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 02 Apr 2014 14:32:39 +0200

x2goserver (4.0.1.13-0x2go1) unstable; urgency=low

  * New upstream version (4.0.1.13):
    - Include all achievements from LTS release branch (as of version
      4.0.0.11).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Mon, 20 Jan 2014 14:04:01 +0100

x2goserver (4.0.1.12-0x2go2) unstable; urgency=low

  * Build hotfix for RPM packages (x2goserver.spec):
    + Add perl(Capture::Tiny) to Requires: field of x2goserver.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 07 Jan 2014 18:36:38 +0100

x2goserver (4.0.1.12-0x2go1) unstable; urgency=low

  * Hotfix release including changes from LTS release version
    4.0.0.10 (see below).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 07 Jan 2014 18:26:28 +0100

x2goserver (4.0.1.11-0x2go1) unstable; urgency=low

  * New upstream version (4.0.1.11):
    - Fix x2gofm.desktop syntax. (Fixes: #391).
    - Include all achievements from LTS release branch (as of version
      4.0.0.9).
  * x2goserver.spec:
    - Enhance requirement of desktop-file-utils, validate x2gofm.desktop
      during package build.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Mon, 06 Jan 2014 18:24:49 +0100

x2goserver (4.0.1.10-0x2go1) unstable; urgency=low

  * New upstream version (4.0.1.10):
    - Fix x2goresume-session. The several parameters placed into the NX options
      file are expected by x2goresume-session at very specific positions. This
      we broke by trying to fix the fullscreen/geometry issue in x2gostartagent.
      Thanks to Harvey Eneman for tracking this down!!! (Fixes: #353, #355).
    - x2goserver-fmbindings/Makefile: install x2gofm.
    - x2goserver-fmbindings/Makefile: install share/applications and share/mime.
    - x2goserver-printing/Makefile: create feature.d directory before installing
      files into it.
    - Handle TCP listening of x2goagent in x2goagent.options. (Fixes: #354).
    - Clean up Makefiles, remove commented out lines.
    - Use xkb ruleset 'base' rather than xfree86 as on RHEL systems the
      xfree86 symlink to base ruleset does not exist.
    - Grab systemd service file from Fedora and ship it upstream.
    - Provide RHEL/Fedora support in x2goserver-xsession.
    - Only sanity check for existence of /etc/x2go/Xsession.d on Debian
      (derived) systems.
    - Provide man page for x2goserver.conf.
  * x2goserver.spec:
    + Ship x2goserver.spec (RPM package definitions) in upstream project.
      (Thanks to the Fedora package maintainers). File differs from the Fedora
      file already.
    + Add init script for RPM based distro. Taken from the Fedora
      package.
    + Clear (Fedora package) changelog.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 03 Jan 2014 11:34:36 +0100

x2goserver (4.0.1.9-0x2go1) unstable; urgency=low

  * Silent bugfix release (4.0.1.9):
    - Incorporate changes from LTS release 4.0.0.7. No other changes performed
      on this release branch. (Fixes: #348).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Thu, 28 Nov 2013 16:06:44 +0100

x2goserver (4.0.1.8-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.1.8):
    - Fix resizing when resuming sessions.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 22 Nov 2013 22:14:50 +0100

x2goserver (4.0.1.7-0~x2go1) unstable; urgency=low

  [ Orion Poplawski ]
  * New upstream version (4.0.1.7):
    - Install Xsession file as executable, make Xsession.d directory location
      configurable during build process, do not create unused Xsession.options.
      (Fixes: #278).

  [ Mike Gabriel ]
  * New upstream version (4.0.1.7):
    - Fine-tune x2goserver-xsession/Makefile: if /etc/X11 has Xsession.d and/or
      Xsession.options they get symlinked into /etc/x2go. Otherwise Xsession.d
      and Xsession.options are created under /etc/x2go as empty dir/file.
      (Fixes: #278).
    - Fix automatic keyboard setup (via x2gosetkeyboard) while resuming a
      session. (Fixes: #285).
    - Provide sudoers.d/x2goserver file that allows sudoed commands under
      KDE (by pertaining the env var QT_GRAPHICSSYSTEM. (Fixes: #276).
    - With PostgreSQL as session db backend, prevent the root user from
      launching sessions. Also, prevent x2gouser_root from being added as a
      PostgreSQL user. (Fixes: #310).
    - Execute DB status changes as late as possible during suspend / terminate.
    - Start/resume rootless sessions without geometry parameter. Esp. using
      X2GO_GEOMETRY=fullscreen for rootless sessions lead to an extra 1x1 px
      session window (nxagentCreateIconWindow in nxagent's Window.c).
    - Typo fix in x2goruncommand (for MATE session startup).
  * debian/control:
    + Update LONG_DESCRIPTIONS.
    + Raise Standards: to 3.9.4 (no changes needed).
    + Move xfonts-base to Recommends: field of bin:package x2goserver.
  * debian/x2goserver.init:
    + Make init script LSB compliant.

  [ Helmer Teles ]
  * New upstream version (4.0.1.7):
    - Make umask that is used when mounting client-side folders via SSHFS
      configurable in x2goserver.conf. (Fixes: #331).

  [ Jürgen Hötzel ]
  * New upstream version (4.0.1.7):
    - Use bash-builtin 'type' instead of to be avoided 'which'. (Fixes: #305).

  [ Oleksandr Shneyder ]
  * New upstream version (4.0.1.7):
    - Fix x2goruncommand: "type -P $cmd" can create new lines in EXEC
      variable if command have the arguments wich have same names as existing
      commands, for example "rdesktop -k nl" -> "/usr/bin/rdesktop\n/usr/bin/nl".
      Now we splitting $cmd and taking only first part.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 22 Nov 2013 21:58:27 +0100

x2goserver (4.0.1.6-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.1.6):
    - Fix client-side unmounting of shared folders.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sun, 28 Jul 2013 13:37:12 +0200

x2goserver (4.0.1.5-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.1.5):
    - Do not hard-code paths to NX code in x2goruncommand anymore. Use
      x2gopath instead. (Fixes: #273).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sun, 28 Jul 2013 02:06:47 +0200

x2goserver (4.0.1.4-0~x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream version (4.0.1.4):
    - Multiply query USED_DISPLAYS and USED_PORTS in x2gostartagent to minimize
      race conditions in cases where many clients launch session simultaneously.
    - Make X2Go Server aware of the MATE desktop environment.
    - x2goumount-session: allow args $X2GO_SESSION <server-mount-point> in
      addition to $X2GO_SESSION <client-directory>.

  [ Rok Mandeljc ]
  * New upstream version (4.0.1.4):
    - The gnome-terminal TERMINAL returns immediately and runs in background
      starting with GNOME 3.8. Thus, set IMEXIT to false for gnome-terminal.
      (Fixes: #268).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sat, 27 Jul 2013 00:08:15 +0200

x2goserver (4.0.1.3-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.1.3):
    - Improve session status management in x2gocleansessions.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sat, 22 Jun 2013 14:32:41 +0200

x2goserver (4.0.1.2-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.1.2):
    - Accelerate resuming of sessions. Fix failures when resuming sessions that
      result from the latest changes in x2gocleansessions. (Fixes: #247).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sat, 22 Jun 2013 11:48:09 +0200

x2goserver (4.0.1.1-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.1.1):
    - Syntax fix in x2goumount-session.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Thu, 13 Jun 2013 13:12:54 +0200

x2goserver (4.0.1.0-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.1.0):
    - Make x2gomountdirs / x2goumount-session UNC path aware.
    - Add support to x2gocleansessions to suspend session via state changes
      in the session DB.
    - Add support for terminating sessions via the session DB.
    - Raise the frequency of the x2gocleansessions loop to every two seconds.
    - Send SIGKILL to blocked X-Server (x2goagent) processes, if they do not
      disappear within 20secs. (Fixes: #32).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 07 Jun 2013 23:07:40 +0200

x2goserver (4.0.0.12-0x2go1) UNRELEASED; urgency=low

  [ Mike Gabriel ]
  * Adopt this patch from stable release branch and apply to LTS branch:
    - Start/resume rootless sessions without geometry parameter. Esp. using
      X2GO_GEOMETRY=fullscreen for rootless sessions lead to an extra 1x1 px
      session window (nxagentCreateIconWindow in nxagent's Window.c).
    - Fix x2goresume-session. The several parameters placed into the NX options
      file are expected by x2goresume-session at very specific positions. This
      we broke by trying to fix the fullscreen/geometry issue in x2gostartagent.
      Thanks to Harvey Eneman for tracking this down!!!
    - Detect suspended sessions from NX log file. Also interpret a session as
      suspended if suspending just has started.
    - Interpret NX display failures as (about to be) suspended sessions.

  [ Oleksandr Shneyder ]
  * New upstream version (4.0.0.12):
    - Fix datetime output format in x2godbwrapper.pm.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 21 Feb 2014 14:25:43 +0100

x2goserver (4.0.0.11-0x2go1) unstable; urgency=low

  * New upstream version (4.0.0.11):
    - Use perl instead of sed for search+replace in session names sanitizing.
      (Fixes: #404).
 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Mon, 20 Jan 2014 14:00:42 +0100

x2goserver (4.0.0.10-0x2go1) unstable; urgency=low

  * New upstream version (4.0.0.10):
    - Add forgotten import of Perl package Capture::Tiny in
      x2goutils.pm.
  * debian/control:
    - Depend on libcapture-tiny-perl.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 07 Jan 2014 18:05:28 +0100

x2goserver (4.0.0.9-0x2go1) unstable; urgency=low

  * New upstream version (4.0.0.9):
    - Sanitize session name in x2gostartagent, as well. Fixes problems
      with custom session commands containing characters that get
      sanitized out.
    - Allow dots (".") in sanitized session names.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Mon, 06 Jan 2014 18:21:36 +0100

x2goserver (4.0.0.8-0x2go1) unstable; urgency=low

  * New upstream version (4.0.0.8):
    - Use mktemp instead of tempfile (because Fedora does not have the tempfile
      binary). (Fixes: #347).
    - Replace makepasswd by pwgen (because Fedora does not have makepasswd).
    - Improve parsing of the NX session.log file where unexpected extra logging
      takes place during session suspension/resumption. Thanks to Gerald Richter
      for finding this!!! (Fixes: #356).
    - Avoid one argument system calls and backticks in x2gocleansessions and
      x2golistsessions_root.
    - Avoid one argument system calls and backticks in x2golistsessions.
    - Avoid one argument system calls and backticks in x2goprint.
    - Avoid backticks in x2goshowblocks, move script to <prefix>/sbin/ as it is
      for being run with root privileges.
    - Sanitize session ID string, port numbers, display numbers and agent PID
      numbers before writing them as strings to the session DB.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 03 Jan 2014 11:30:54 +0100

x2goserver (4.0.0.7-0x2go1) unstable; urgency=low

  * New bugfix upstream version (4.0.0.7):
    - Revert keyboard workaround for Mac OS X, as it causes other issues.
      (Fixes: #348).
  * debian/source/format:
    + Switch to format 1.0.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Thu, 28 Nov 2013 16:00:37 +0100

x2goserver (4.0.0.6-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.0.6):
    - Work around buggy X2Go Client on Mac OS. If the keyboard type
      is set to "query", we force X2GO_SET_KBD to 1.
      (Partly resolves: #112).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 22 Nov 2013 21:56:44 +0100

x2goserver (4.0.0.5-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.0.5):
    - Make x2goumount-session tolerant towards usernames that contain spaces
      (Fixes: #202).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sun, 28 Jul 2013 01:47:03 +0200

x2goserver (4.0.0.4-0~x2go1) unstable; urgency=low

  [ Jan Engelhardt ]
  * New upstream version (4.0.0.4):
    - Fix Perl include path for X2Go related Perl packages (which do
      not get installed to some system default path for this version
      of x2goserver).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Thu, 13 Jun 2013 13:10:28 +0200

x2goserver (4.0.0.3-0~x2go1) unstable; urgency=low

  * New upstream version (4.0.0.3):
    - Make pre-set DESTDIR and PREFIX traverse through all Makefiles.
      Do not include DESTDIR in Makefile-hard-coded path in x2gosqlitewrapper.
    - Partially revert USED_PORTS detection code back to the old-style awk-way.
      (Fixes: #155).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 07 Jun 2013 23:03:20 +0200

x2goserver (4.0.0.2-0~x2go1) unstable; urgency=low

  [ Matthew L. Dailey ]
  * New upstream version (4.0.0.2):
    - Do parse profile/xprofile files in X2Go's Xsession file. (Fixes: #149).

  [ Jan Engelhardt ]
  * New upstream version (4.0.0.2):
    - Use x2gopath in Perl scripts to set the lib path. (Fixes: #103).

  [ Mike Gabriel ]
  * New upstream version (4.0.0.2):
    - Use make_path from File::Path in x2godbadmin to create user directory if
      not present. (Fixes: #200).
    - Security fix for setgid wrapper x2gosqlitewrapper.c. Hard-code path to
      x2gosqlitewrapper.pl during build via defining a macro in the Makefile.
      Thanks to Richard Weinberger for spotting this!!!
  /debian/control:
    + Let x2goserver bin:package depend on xfonts-base and fontconfig. (Fixes:
      #163).
    + Create session log symlink after launching x2goagent. Fix order of target
      and symlink name when executing the command.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sun, 19 May 2013 00:54:34 +0200

x2goserver (4.0.0.1-0~x2go1) unstable; urgency=low

  [ Bernard Cafarelli ]
  * New upstream version (4.0.0.1):
    - Make CFLAGS usable in x2goserver. (Fixes: #83).

  [ Matthew L. Dailey ]
  * New upstream version (4.0.0.1):
    - Fix command/version detection for GNOME/Unity on Ubuntu. (Fixes: #105).

  [ Mike Gabriel ]
  * New upstream version (4.0.0.1):
    - Allow for deploying X2Go Published Applications system-wide on a
      per-user basis (in /etc/x2go/applications-per-user/<username>).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 22 Mar 2013 13:52:43 +0100

x2goserver (4.0.0.0-0~x2go1) unstable; urgency=low

  [ Jan Engelhardt ]
  * New upstream version (4.0.0.0):
    - Replace script x2gobasepath by script x2gopath that makes it much easier
      for distro packagers to tweak the installation paths of X2Go Server
      components.

  [ Mike Gabriel ]
  * Bump version to 4.0.0.0 (for Baikal bundle release).
  * New upstream version (4.0.0.0):
    - Adapt Xinerama path in x2gopath: use $base for detecting the path to the
      Xinerama libs, as well, as is done with all the other paths.
    - Fix mounting of multiple paths, thanks to Pascal Vibet. (Fixes: #67).

  [ Orion Poplawski ]
  * New upstream version (4.0.0.0):
    - Honour CFLAGS when compiling the server's sgid wrapper script (Fixes: #83).

  [ Oleksandr Shneyder ]
  * New upstream version (4.0.0.0):
    - Fix SSHFS mounting from Ubuntu clients.
    - Create /tmp/.X11-unix if not exists. (Fixes: #93).

  [ Reinhard Tartler ]
  * New upstream version (4.0.0.0):
    - Introduce /etc/x2go/x2goagent.options to allow overriding x2goagent
      options. This new configuration file specifies default options
      that clients can override.
    - Disable XFIXES and GLX. Both are known to cause certain
      problems. Hopefully we find better solutions so that we can reenable
      them soon.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sun, 30 Dec 2012 17:39:44 +0100

x2goserver (3.1.1.9-0~x2go1) unstable; urgency=low

  * New bugfix release (3.1.1.9):
    - Fix x2godesktopsharing, we had added to many quotation marks in
      x2gostartagent.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 23 Nov 2012 15:32:11 +0100

x2goserver (3.1.1.8-0~x2go1) unstable; urgency=low

  * New bugfix release (3.1.1.8):
    - Fix startup of GNOME and UNITY sessions (issue introduced with 3.1.1.7).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 23 Nov 2012 12:01:01 +0100

x2goserver (3.1.1.7-0~x2go1) unstable; urgency=low

  * New upstream+bugfix release (3.1.1.7):
    - Use DISTRIB_RELEASE to query Ubuntu release versions and detect Unity launch
      command.
    - Detect GNOME and UNITY startup commands via DISTRIB_RELEASE version number
      and by using the bc command for comparing versions.
    - Do not fail if source_environment() cannot find the file to be sourced.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Thu, 22 Nov 2012 18:11:15 +0100

x2goserver (3.1.1.6-0~x2go1) unstable; urgency=low

  * Bugfix release (3.1.1.6):
    - Fix for non-well-tested x2gomountdirs script.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 07 Nov 2012 20:57:54 +0100

x2goserver (3.1.1.5-0~x2go1) unstable; urgency=low

  [ Stéphane Graber ]
  * New upstream version (3.1.1.5):
    - Add a very basic SIGCHLD handler to x2gocleansessions. on SIGCHLD
      let the script wait for cleaning up after its children. (Fixes: #38).

  [ Mike Gabriel ]
  * New upstream version (3.1.1.5):
    - Fix x2gogetapps when rendering multi-section .desktop files. (Fixes: #43).
    - Remove redundant setting of loglevel in x2gogetapps.
    - Fix ,,Only extend LD_LIBRARY_PATH by Xrandr extension for KDE. Breaks
      GNOME.'' from last release.
    - Detect i18n name of Desktop folder via XDG_DESKTOP_DIR environment
      variable.
    - Put option of database call in x2gogetagent into parantheses.
  * /debian/control:
    + Depend on libfile-basedir-perl.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 07 Nov 2012 16:36:36 +0100

x2goserver (3.1.1.4-0~x2go1) unstable; urgency=low

  [ Jan Engelhardt ]
  * New upstream version (3.1.1.4):
    - Add -pie as linker flag. Fixes non-position-independent-executable
      (x2gosqlitewrapper.c). The executable is now completely position
      independent.

  [ Mike Gabriel ]
  * New upstream version (3.1.1.4):
    - Fix x2gosessionlimit script.
    - Wrap padsp around rdesktop calls if pulse is used as audio protocol.
    - Add option ,,-r sound:local'' to rdesktop calls if pulse is enabled.
    - Proxy X2Go client-side shares into remote desktop session.
    - For applications inside of a session, use NX's Xrandr library instead
      of Xorg's Xrandr library (partially fixes #28).
    - Make sure when launching desktop session through the Xsession mechanism
      that the LD_LIBRARY_PATH variable stays intact. (Fixes: #29).
    - Only extend LD_LIBRARY_PATH by Xrandr extension for KDE. Breaks GNOME.
  * /debian/control:
    + Maintainer change in package: X2Go Developers <x2go-dev@lists.berlios.de>.
    + Depend on nx-libs (>=3.5.0.15-0~) which has the Xrandr symlinks folder.
    + Add rdesktop and pulseaudio-utils to Suggests.
    + Priority: optional.

  [ Oleksandr Shneyder ]
  * New upstream version (3.1.1.4):
    - Remove "-nolisten tcp" option with XDMCP sessions.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 25 Sep 2012 13:15:11 +0200

x2goserver (3.1.1.3-0~x2go1) unstable; urgency=low

  [ Jan Engelhardt ]
  * New upstream version (3.1.1.3):
    - Do not block /etc/X11/Xresources with a directory (in Makefile).
    - Avoid using archaic tools during free port detection.
    - Avoid using ls in Makefiles.

  [ Mike Gabriel ]
  * New upstream version (3.1.1.3):
    - Fix broken X2Go client-side printing. Adapt x2goprint to new spool job
      directory.
  * /debian/x2goserver.init:
    + Orthography fix: X2Go instead of x2go.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 03 Jul 2012 10:00:32 +0200

x2goserver (3.1.1.2-0~x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream version (3.1.1.2):
    - Place session.log into /tmp directory, make x2gocleansessions and
      x2golistsessions_root work even if home directories are mounted
      via NFSv4+Krb5 and not accessible by root. 
    - Use -fPIE gcc (position independed executable) for building
      x2gosqlitewrapper.c (as suggested by Jan Engelhardt).
    - Clean up session.log tmp directory if empty.
    - Move all X2Go tmp folders (mount points) to /tmp/.x2go-<user>.
      Make sure all tmp folders get removed if not used any more. Drop
      symlink ~/media if no client-side folders are mounted into a
      session.
    - Fix crashes of x2gocleansessions due to faulty syslog calls.
    - Drop redundant hostname calls in x2gocleansessions.
    - Launch x2goagent with $NX_TEMP=/tmp, otherwise it will fail to
      create the X11 Unix domain sockets.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Fri, 29 Jun 2012 17:44:57 +0200

x2goserver (3.1.1.1-0~x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream version (3.1.1.1):
    - Add/fix Python X2Go folder sharing/unsharing support from Windows.
    - Handle whitespace in folder names appropriately.
    - Allow .desktop file parameter Terminal=... to pass through to X2Go
      client-side.
    - Avoid error messages in x2gocmdexistmessage if cmdoutput file could
      not be found.
    - Provide nx-X11 libraries for applications launched via x2goruncommand.
    - Add feature X2GO_SERVERSIDE_DESKTOPCOMMANDS. Let client provide a generic
      desktop shell command (GNOME, UNITRY, KDE, etc.) which then gets
      translated into an executable command by x2goruncommand.
    - Detect desktop session mode to use for Ubuntu precise and later.
    - Complete UNITY/GNOME support for Ubuntu/Debian.
    - Use ,,-nolisten tcp'' option when evoking x2goagent from within
      x2gostartagent.
    - Export NX_ROOT=$HOME/.x2go in x2gostartagent. Makes the keyboard file
      in X2Go session cache directory.
    - Add support for client-side keyboard detection. Moved script
      x2gosetkeyboard from x2goserver-pyhoca into x2goserver package.
    - Make x2gosetkeyboard set the client-side keyboard on session start and
      resume if usekbd is set to True and the keyboard type is set ,,auto''.
    - Reset keyboard settings to pc104/us before setting client-side keyboard
      parameters.
    - For finished sessions purge all mount points that still hover in the
      DB's mounts table.
    - Make sure we run fusermount from within a directory that the user has read
      access to.
  * Depend on x2goagent (>= 2:3.5.0.12), make sure that x2goagent has the patch
    105_nxagent_export-remote-keyboard-config.full.patch included.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Thu, 21 Jun 2012 14:16:08 +0200

x2goserver (3.1.1.0-0~x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream version (3.1.1.0):
    - Syslog warnings have to be named ,,warning'' not ,,warn''. 
    - Add usage output to x2goserver-run-extensions.
    - Fix syslog output of x2goserver-run-exentions.
    - Fix x2goserver extension calls in x2goruncommand.
    - Add feature name ,,X2GO_PUBLISHED_APPLICATIONS''.
    - Add new command ,,x2gofeaturelist''. This command can be used
      by X2Go client applications to retrieve a list of server-side
      supported X2Go features.
    - Update date and version number in man pages.
    - Fix race condition between session.log of x2goagent and
      x2gocleansessions. The old situation was: in cases that x2goagent
      was not fast enough with appending the new session state to the
      session.log file, the x2gocleansessions script marked the session
      as suspended during the session resuming process.
    - Wait one second for x2goagent to write to session.log before updating
      the session state from 'S' to 'R' in the X2Go session database.
    - Add X2Go server script x2gogetstatus.
    - Add/enable debugging of x2gocleansessions.
    - Silence error messages if the agent's session.log file is not accessible
      (e.g. on NFSv4+Krb5-mounted homes).
    - Improve concurrent database access with session db backend SQLite.
  * Remove /etc/x2go/applications on package removal if it is a
    symlink, keep it, if it is a directory. Remove /etc/x2go
    (if empty after purge) on package purge.
  * Bump Debian packaging standards version to 3.9.3.
  * Use dh_link to symlink X11 directories into /etc/x2go.

  [ Oleksandr Shneyder ]
  * New upstream version (3.1.1.0):
    - Support for "published applications".
      Sponsored by Stefan Baur (http://www.baur-itcs.de).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 04 Apr 2012 11:41:02 +0200

x2goserver (3.1.0.1-0~x2go1) unstable; urgency=low

  * New upstream version (3.1.0.1):
    - Provide infrastructure for on-logout script calls.
    - Do only run session cleanup scripts from within
      x2goruncommand. Dropping them from x2goterminate-session.
    - Be tolerant against x2go_logout script failures.
    - Fix Makefile of x2goserver-fmbindings (thanks to Oliver Burger),
      improve uninstall code in Makefiles.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 07 Mar 2012 21:05:28 +0100

x2goserver (3.1.0.0-0~x2go1) unstable; urgency=low

  [ Oleksandr Shneyder ]
  * New upstream version (3.1.0.0):
    - remove ports used by X2Go session from database after session was finished
      if postgres backend is used.
    - before resuming X2Go session check if reserved ports still available
      in other case find new free ports, save them in database and send to
      x2goclient
    - run netstat -tl --all to find free ports for graphic, sound and sshfs
      tunnels in x2gostartagent and x2goresume-session

  [ Milan Knížek ]
  * New upstream version (3.1.0.0):
    - Fix removal of desktop link on x2goumount-session if local folder of a
      Windows client gets unmounted.
    - Remove redundant -S option from x2goagent start-up command line.
    - Use -f $XAUTHORITY with xauth calls.

  [ Sören Plönnigs ]
  * New upstream version (3.1.0.0):
    - Only run kdialog/zenity from x2goumount-session if either of them exists
      in the system's $PATH.

  [ Jan Engelhardt ]
  * New upstream version (3.1.0.0):
    - Use /cgi-bin/man/ path in web'ified man pages.
    - Use ,,${MAKE}'' instead of ,,make'' in Makefile.

  [ Mike Gabriel ]
  * New upstream version (3.1.0.0):
    - Provide new package x2goserver-fmbindings. Derived from a package draft
      provided by Milan Knížek (Thanks!).
    - Do not create desktop icons for rootless (i.e. non-desktop) sessions.
    - Allow other $XAUTHORITY values than the default ($HOME/.Xauthority).
    - For x2gomountdirs / x2goumount-session allow other TMP paths than
      /tmp. Use ENV{'TMP'} instead, unless it is empty. Then use /tmp.
    - Place quotations where appropriate into shell scripts.
    - Fix call to x2goterminate-desktopsharing in x2goruncommand.
    - Tolerate user names containing "-" characters (SQLite DB backend).
    - Make sure x2gocleansessions close _all_ open file handles after
      forking as a daemon.
    - Add copyright header for x2gofm script.
    - Add man page for x2gogetservers script.
    - Add man page for x2gofm wrapper script.
    - Update date and release version in man pages.
  * Let x2goserver package suggest x2goserver-fmbindings.
  * Add package upgrade warning for installation using PostgreSQL. The
    upgrade warning refers to README.upgrade-pgsql-database.
  * x2goserver-fmbindings does not have to depend on ${shlibs:Depends}.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 22 Feb 2012 14:37:34 +0100

x2goserver (3.0.99.10-0~x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream version (3.0.99.10):
    - Replace all string ,,X2go.' with ,,X2Go''.
    - Use $(MAKE) -C <subdir> calls to run Makefiles in subfolders.
    - Disable rastering in >= KDE4.8 and Qt4.8.
  * x2goserver.postinst script leaves the DB file alone if
    a DB backend different from SQLite is configured. Thanks
    to Jochen Schulz for bringing this into awareness.

  [ Jochen Schulz ]
  * New upstream version (3.0.99.10):
    - Escape DB user names in x2godbadmin.
    - Export KRB5CCNAME in x2goruncommand, make Kerberos ticket cache
      known inside X2Go sessions.

  [ Moritz Strübe ]
  * New upstream version (3.0.99.10):
    - Check whether the associated TCP/IP port is available before
      assigning a display number.
  * Add net-tools package as dependency.

  [ John Williams ]
  * New upstream version (3.0.99.10):
    - Fix xserver-xsession/Makefile: add missing $(DESTDIR) expressions.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 01 Feb 2012 13:40:31 +0100

x2goserver (3.0.99.9-0~x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream version (3.0.99.9):
    - Fix for install stanzas in several Makefiles.
    - Give X2Go session windows a human readable title.
    - Desktop sharing: fix username of user who requests desktop sharing.
    - Fix x2gobasepath for Perl versions < 5.10.x.
    - Fix x2godbadmin for Perl versions < 5.10.x.
    - Remove x2gosetkeyboard from x2goserver-extensions package.
    - Re-add x2gosetkeyboard via new subproject x2goserver-pyhoca.
    - Call x2golistmounts with user privileges instead of using db_getmounts
      in x2goprint script.
    - Avoid potentially empty LD_LIBRARY_PATH path in x2goruncommand.
    - Install x2gogetservers to $PREFIX/bin instead of $PREFIX/lib/x2go.
  * Add psmisc package as dependency.
  * Add new binary package to x2goserver source: x2goserver-pyhoca.
  * x2goserver package suggests x2goserver-pyhoca.
  * Fix directory permissions of $HOME directory of x2goprint system user.

  [ Hayawardh Vijayakumar ]
  * New upstream version (3.0.99.9):
    - Fix potentially empty LD_LIBRARY_PATH in x2gostartagent.

  [ Oleksandr Shneyder ]
  * New upstream version (3.0.99.9):
    - Add Xinerama support.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 18 Jan 2012 14:39:57 +0100

x2goserver (3.0.99.8-0~x2go1) unstable; urgency=low

  * New upstream version (3.0.99.8):
    - Fix feature list in x2goserver-extensions.
    - Add Xsession.d processing to X2Go (as x2goserver-xsession add-on
      package).
    - Ignore failures of x2gofeature calls, fixes x2goserver being
      installed without x2goserver-extensions.
    - Set X2Go log level to info when running Xsession parts.
  * Make sure that package scripts (postinst, postrm, etc.) exit with
    exit code 0 at the end of the script.
  * Fix non-local printing with X2Go: x2goprint user on X2Go server host
    needs a shell to accept incoming print jobs from the central CUPS
    server(s).

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Sun, 20 Nov 2011 18:54:26 +0100

x2goserver (3.0.99.7-0~x2go1) unstable; urgency=low

  * New upstream version (3.0.99.7):
    - Move x2golistmounts script from x2goserver-extensions to x2goserver
      core.
    - X2Go server extensions: fix regular expression when scanning modality dirs.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 26 Oct 2011 13:04:54 +0200

x2goserver (3.0.99.6-0~x2go1) unstable; urgency=low

  [ Mike Gabriel ]
  * New upstream version (3.0.99.6):
    - Rename x2goumount_session calls to x2goumount-session calls in
      x2goserver internal scripts.
    - Re-arranged script files into /bin and /lib directories.
    - Tab'ified all script files, proper indentation, coding style.
    - Fix for x2gomountdirs, now also usernames containing blanks can use
      local folder sharing.
    - Provide C wrapper for setgid call of x2gosqlitewrapper.pl. Remove
      dependency from perlsuid.
    - Store SQLite db in /var/lib/x2go to comply to latest FHS.
    - Add x2gobasepath script to reliably detect x2goserver install path.
    - Add man page for x2gobasepath.
    - Remove Debianisms from INSTALL howto.
    - Add chromium-browser as possible WWWBROWSER to x2goruncommand.
    - Add lxterminal as possible TERMINAL to x2goruncommand.
    - Add LibreOffice.org as possible OFFICE application to x2goruncommand.
    - Fix for TERMINAL command execution if konsole (KDE4) is installed on the
      server.
    - Silence x2golistsessions on missing session.log files.
    - Add x2goprint user creation information to INSTALL howto.
    - Add sanity checks to x2goprint, script can only be run as root.
    - Fix x2goprint, add syslogging, add inline comments.
    - Add script lib/x2gologlevel: introduce [log] section in x2goserver.conf
      with only parameter ,,loglevel''.
    - Initialize Syslog module for all Perl scripts in x2goserver package.
    - Add debugging support for almost all DB functions in x2godbwrapper.pm, fix
      for Syslog module initialization in all Perl scripts.
    - Add info loglevel messages for all scripts in bin dir.
    - Add notice messages for start, suspend, resume, terminate, mountdirs
      actions.
    - Fix for x2godbwrapper.pm: we can't open/close the syslog socket in a
      package. This has to be done by the scripts that use x2godbwrapper.pm.
    - Add info loglevel messages for x2goserver-extensions scripts.
    - Use usermapping for SSHFS mount points.
    - Cleanup of man page area, thanks to Ivan Kabaivanov for pointing that out.
    - Rename example user and group for session limits in x2goserver.conf so that
      people do not get the idea to put users in x2gouser group.
    - Add real error message if client fails to resume/suspend/terminate
      a session.
    - Present an ISO-8601 compliant datetime string in session lists
      rendered by x2golistsessions (and similar) command(s).
    - Silence knotify SIGHUP signals in case that no knotify is running in the
      X2Go session.
    - Fix x2goumount-session for individual paths (folder type: disk),
      ToDo: folder type CDROM and removable media.
    - Let db_insertmount create a proper return value (success vs. failed).
    - If resuming or suspending of a session fails, mark the session as
      finished (because the session's x2goagent is very probably dead). 
      Do not write an error to stderr if x2goterminate-session fails (i.e. if
      x2goagent is dead).
    - Identified x2goumount script (x2goserver-compat) as a necessary
      component of x2gognomebindings and moved it there (with new name:
      x2goumount-session-gnome).
    - Add x2golistmounts script to X2Go server extensions.
    - Add x2gofeature script and x2gofeature.d subscripts.
    - Add x2gofeature man page.
    - Move x2goversion script into x2goserver core.
    - Add debug output around shadow session startup (in x2gostartagent).
    - Pass extra argument $USER to client-mode x2godesktopsharing, requires
      x2godesktopsharing (>=3.0.1.3) for it to work.
    - Clean session dir ~/.x2go/C-<session_id> after session terminates, if not
      running in debug mode.
    - Change of Desktop icons for shared folders. This change is needed for
      parallel installation of x2gognomebindings and x2golxdebindings.
    - Terminate x2godesktopsharing cleanly for current session on
      x2goterminate-session or when x2goruncommand is about to exit.
    - Resume/suspend x2godesktopsharing during x2goresume-session,
      x2gosuspend-session.
    - Provide pluggable X2Go extension system for main X2Go server
      functions.
    - Provide man page for x2goserver-run-extensions that explains the new plug-in
      mechanism of x2goserver.



  * React to Debian bug #627990, prefer man2html-base over man2html.
  * Do not depend on package perlsuid anymore.
  * Use source format 3.0 (native).
  * Fix of Debian clean rules, fix of Makefile's clean rules.
  * Breaks/replaces packages: x2goserver-one, x2goserver-home, x2goprint
    (instead ofB Conflicts).
  * Tab'ified postinst/postrm scripts.
  * Install internal x2goserver scripts to /usr/lib/x2go, make sure scripts
    in /usr/bin find these scripts.
  * x2goserver.postinst: fix home path updates if new home path already exists
  * Provide separate package x2goserver-printing: x2goprint script + man page +
    adduser x2goprint.

  [ Moritz Strübe ]
  * Improvements for new upstream version (3.0.99.6):
    - Make digits at the beginning of X2Go server extension scripts a must, not a
      suggestion.

  [ Ivan Kabaivanov ]
  * Improvements for new upstream version (3.0.99.6):
    - Many Makefile fixes around man page installation.
    - Proof-reading code, fixing typos.

  [ Martin Oehler ]
  * Fixes for new upstream version (3.0.99.6):
    - Removes old debug code fragment, fixes x2golistsessions parsing.

  [ Oleksandr Shneyder ]
  * Improvements for new upstream version (3.0.99.6):
    - Remove session directory after 10 sec delay to let x2goclient check
      cmdoutput file.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Wed, 12 Oct 2011 11:44:59 +0200

x2goserver (3.0.99.5-0~x2go2) unstable; urgency=low

  * splitting up x2goserver package into x2goserver and x2goserver-extensions
    (x2goserver provides full functionality to legacy x2goclient,
    x2goserver-extensions is a container/namespace for add-on tools/scripts 
    needed for other client implementations like Python X2Go.

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 31 May 2011 10:57:15 +0200

x2goserver (3.0.99.5-0~x2go1) unstable; urgency=low

  * adds x2goprint to x2goserver package
  * implements X2Go MIME Box feature
  * fixes installation conflicts with x2goserver-one, x2goserver-home
    and x2goprint
  * change of version numbering scheme
  * re-organization of folder structure
  * adds several man pages
  * adds x2goversion script

 -- Mike Gabriel <mike.gabriel@das-netzwerkteam.de>  Tue, 03 May 2011 10:42:02 +0200

x2goserver (3.0.99-5) unstable; urgency=low

  * fixed db_getserver

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Wed, 30 Mar 2011 18:16:48 +0200

x2goserver (3.0.99-4) unstable; urgency=low

  * support for ssl connect (postgresql)

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Wed, 16 Mar 2011 11:16:21 +0100

x2goserver (3.0.99-3) unstable; urgency=low

  * fixed wrong path to dbfile, thanks Moritz Struebe <Moritz.Struebe@informatik.uni-erlangen.de>

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Mon, 31 Jan 2011 18:38:13 +0100

x2goserver (3.0.99-2) unstable; urgency=low

  * menu=0 option in x2gostartagent, to avoid crash in single app mode

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 27 Jan 2011 18:38:17 +0100

x2goserver (3.0.99-1) unstable; urgency=low

  * not use sudo with postgresql, wrappers in perl instead of bash
  * use unprivileged user x2gouser with sqlite

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Tue, 25 Jan 2011 17:09:01 +0100

x2goserver (3.0.1-9) unstable; urgency=low

  * changes in x2gomountdir to use with plasmoid

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Mon, 07 Jun 2010 18:51:50 +0200

x2goserver (3.0.1-8) unstable; urgency=low

  * changes in db warppers - do not show shadow sessions in listsessions and listsessions_all

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Tue, 01 Jun 2010 19:08:53 +0200

x2goserver (3.0.1-7) unstable; urgency=low

  * support for fs encodings in x2gomountdirs

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 06 May 2010 18:34:42 +0200

x2goserver (3.0.1-6) unstable; urgency=low

  * fixed access mode for key in x2gomountdirs
  * supoort for session sharing

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Wed, 10 Feb 2010 10:52:34 +0100

x2goserver (3.0.1-5) unstable; urgency=high

  * force mcookie auth for x2goagent

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Mon, 14 Dec 2009 20:58:42 +0100

x2goserver (3.0.1-4) unstable; urgency=low

  * Fix x2gosessionslimit

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 02 Dec 2009 22:14:27 +0100

x2goserver (3.0.1-3) unstable; urgency=low

  * libconfig-simple-perl in dependency section

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 02 Dec 2009 22:00:56 +0100

x2goserver (3.0.1-2) unstable; urgency=low

  * setting dpi for x2goagent in x2gostartagent
  * session limits for users and groups in /etc/x2go/x2goserver.conf
  * ssh option ServerAliveInterval=300 in x2gomountdirs

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Mon, 02 Nov 2009 16:30:15 +0100

x2goserver (3.0.1-1) unstable; urgency=low

  * Support for sqlite
  * fixed problem with HOSTNAME variable in perl scripts when users shell is zsh. Thank Ralf Schulze

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 16 Jul 2009 10:56:23 +0200

x2goserver (3.0.0-2) unstable; urgency=low

  * Support for rdesktop sessions
  * Transform xorg rules to evdev in x2goserver
  * Changes in keyboard settings

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Fri, 10 Jul 2009 08:26:41 +0200

x2goserver (3.0.0-1) unstable; urgency=low

  * Printing support (need x2goprint and cups-x2go)
  * add group x2gousers and configure sudo in preinstall script

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Wed, 04 Mar 2009 16:49:59 +0100

x2goserver (2.0.1-19) unstable; urgency=low

  * fixed installinit script break if x2goserver not running 

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Fri, 30 Jan 2009 08:38:03 +0100

x2goserver (2.0.1-18) unstable; urgency=low

  * fixed preinst script to work with ubuntu

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 29 Jan 2009 10:09:25 +0100

x2goserver (2.0.1-17) unstable; urgency=low

  * changes in database (start x2gocreatebase.sh):
  *           session_id - varchar(500)
  *           column "fsport" for fs tunnel
  * changes in x2gostartagent: add fsport to session info
  * changes in x2gopgwrapper_(local/net): fsport in listsessions
  * changes in x2gomountdirs: mount using reverse ssh tun

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 15 Jan 2009 17:25:54 +0100

x2goserver (2.0.1-16) unstable; urgency=low

  * added x2gosuspend-agent to suspend session on clicking "close" button on x2goagent

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Mon, 03 Nov 2008 16:11:56 +0100

x2goserver (2.0.1-15) unstable; urgency=low

  * Fixed: run command with arguments
  * Error message if command not exists

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 09 Oct 2008 15:42:29 +0000

x2goserver (2.0.1-14) unstable; urgency=low

  * added: list sessions from all servers

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Wed, 08 Oct 2008 10:16:18 +0200

x2goserver (2.0.1-13) unstable; urgency=low

  * changes to enable "rootless" mode

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 25 Sep 2008 17:33:18 +0200

x2goserver (2.0.1-12) unstable; urgency=low

  * changes in x2gomount/umount to use with gnome

 -- Oleksandr Shneyder <admin@power.obviously-nice.de>  Fri, 29 Aug 2008 11:18:43 +0200

x2goserver (2.0.1-11) unstable; urgency=low

  * now x2gomountdirs can mount dirs on client hosts with ssh ports other then 22 

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Fri, 21 Sep 2007 12:12:34 +0200

x2goserver (2.0.1-10) unstable; urgency=low

  * x2gomountdirs fixed mounting directories with " " in path
  * changed /bin/sh to /bin/bash in scripts
  * x2gostartgent append color depth to session's name

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 13 Sep 2007 14:01:17 +0200

x2goserver (2.0.1-9) unstable; urgency=low

  * esd support

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Tue,  7 Aug 2007 15:31:51 +0200

x2goserver (2.0.1-8) unstable; urgency=low

  * changed architecture to "all"

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu, 28 Jun 2007 10:11:10 +0200

x2goserver (2.0.1-7) unstable; urgency=low

  * support for amd64

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Tue, 26 Jun 2007 16:32:53 +0200

x2goserver (2.0.1-6) unstable; urgency=low

  * close std file descriptors in daemon

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Wed, 25 Apr 2007 10:40:22 +0200

x2goserver (2.0.1-5) unstable; urgency=low

  * fix listsusp in wrapper

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Tue, 20 Mar 2007 12:06:00 +0100

x2goserver (2.0.1-4) unstable; urgency=low

  * fix getdisplays and getports in wrapper

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Tue, 20 Mar 2007 12:06:54 +0100

x2goserver (2.0.1-3) unstable; urgency=low

  * listallrunning and listsusp in postgress wrapper
  * changes in database template, unique display and ports

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Mon, 19 Mar 2007 15:13:32 +0100

x2goserver (2.0.1-2) unstable; urgency=low

  * get server name with `hostname` in cleansessions

 -- root <root@x2gotest1.x2go.obviously-nice.de>  Wed, 28 Feb 2007 09:49:48 +0100

x2goserver (2.0.1-1) unstable; urgency=low

  * Initial release

 -- Oleksandr Shneyder <oleksandr.shneyder@obviously-nice.de>  Thu,  8 Feb 2007 15:21:30 +0100

